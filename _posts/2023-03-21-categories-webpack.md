---
title: "[Webpack] Webpack & Bundling"
excerpt: "웹팩과 번들링에 대해 알아보자"

categories:
  - Webpack
tags:
  - [Webpack, bundling]

permalink: /Webpack/웹팩과 번들링

toc: true
toc_sticky: true

date: 2023-03-21
last_modified_at: 2023-03-21
---
<hr>

## 🛠️ 번들링
프론트엔드에서 번들링이란 사용자에게 웹 애플리케이션을 제공하기 위한 파일 묶음을 말한다.

그리고 웹 애플리케이션을 구성하는 여러개의 자원들을 하나로 병합해주는, 즉 번들링 해주는 도구를 번들러(Bundler)라고 한다.

![번들링](/assets//images/posts_img/webpack/bundle.png)
기능별로 모듈화 했던 파일들을 하나로 묶어주는 작업을 한다.

### 번들링이 필요한 이유
- 두 개의 .js 파일에서 같은 변수를 사용하고 있어서, 변수 간 충돌이 일어났습니다.
- 딱 한 번 불러오는 프레임워크 코드가 8MB라서, 인터넷 속도가 느린 국가의 모바일 환경에서 사용자가 불편을 호소합니다.
- 번들 파일 사이즈를 줄이기 위해서 파일의 공백을 모두 지웠는데, 가독성이 너무 떨어져서 코딩하기가 어렵습니다. 결국 그대로 공백을 되돌려서 코딩합니다.
- 배포 코드가 너무 읽기 쉬워 개발을 할 줄 아는 사용자가 프론트엔드 애플리케이션을 임의로 조작하여 피해가 발생했습니다.

<hr>

## 🛠️ 웹팩
Webpack이란 여러 개의 파일을 하나의 파일로 합쳐주는 모듈 번들러를 말한다.

### 모듈 번들러란?
HTML, CSS, JavaScript 등의 자원을 전부 각각의 모듈로 보고 이를 조합해 하나의 묶음으로 번들링(빌드)하는 도구를 말한다.

> **모듈 번들러의 등장**<br>
1. JavaScript 코드 양이 증가하고, 대규모의 의존성 트리를 가지고 있는 대형 웹 애플리케이션이 등장하면서 세분화된 모듈 파일 또한 증가했다.
2. 이 모듈 단위의 파일들을 호출 해 브라우저에 띄어야하는데, JavaScript의 언어 특성에 따라 발생하는 **변수들의 스코프 문제**들이나, 각 자원을 호출할 때 생기는 **네트워크 쪽의 코스트**들을 신경 써줘야했다.
3. 이런 복잡성에 대응하기 위해 하나의 시작점(ex. React App 의 index.js)등으로 부터 **의존성을 가지는 모듈을 모두 추적해 하나의 결과물**을 만들어내는 모듈 번들러가 등장하게 되었다.

### Webpack에서의 모듈
- Webpack에서의 모듈은 JavaScript의 모듈에만 국한하지 않는다.
- HTML, CSS, images, font 등을 모두 포함한다.
- Webpack은 주요 구성 요소인 로더(loader)를 통해 다양한 번들링이 가능하다.

### 빌드와 번들링
- **빌드**: 개발이 완료된 앱을 배포하기 위해 하나의 폴더(directory)로 구성해 준비하는 작업
  - 리액트의 `npm run build`: 커맨드를 통해 index.html 파일에 압축되어 배포에 최적화된 상태 제공
- **번들링**: 파일을 묶는 작업 그자체
  - 여기서 파일은 의존적 관계에 있는 파일들(import, export) 그 자체 혹은 내부적으로 포함되어 있는 모듈을 의미한다.
  - 모듈간의 의존성 관계를 파악해 그룹화 하는 작업

### 웹팩이 필요한 이유
<h4 class="sub-title">1. 네트워크 코스트가 획기적으로 줄어든다.</h4>
- Webpack이 없다면 각 자원들을 일일히 서버에 요청해 얻어와야 하지만, Webpack이 있다면 같은 타입의 파일들은 묶어서 요청 및 응답을 받을 수 있기 때문에 네트워크 요청 횟수를 줄일 수 있다.

<h4 class="sub-title">2. 다양한 loader</h4>
- Webpack loader를 사용하면 일부 브라우저에서 지원하지 않는 JavaScript ES6의 문법들을 ES5로 번환해주는 `babel-loader`를 사용할 수 있다.
- Vue인 경우는 `vue-loader`를, scss 파일 같은 경우는 css 파일로 변환해주는 `scss-loader` 등의 loader도 사용할 수 있기 때문에 개발자는 본인이 원하는 최선의 개발 방식을 선택해 개발할 수 있게끔 지원해준다.

<h4 class="sub-title">3. mode 지원</h4>
- Webpack4 버전 이상부터는 Develoment, Production 두 가지의 모드를 지원한다.
- Production 모드로 번들링을 진행할 경우, 코드 난독화, 압축, 최적화(Tree Shaking) 작업을 지원해준다.
- 한마디로 상용화 된 프로그램을 사용자가 느끼기에 더욱 쾌적한 환경 및 보안까지 신경쓰면서 노출시킬 수 있다.
